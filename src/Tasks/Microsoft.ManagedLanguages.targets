<!--
***********************************************************************************************
WARNING:  DO NOT MODIFY this file unless you are knowledgeable about MSBuild and have
          created a backup copy.  Incorrect changes to this file will make it
          impossible to load or build your projects from the command-line or the IDE.

This file defines common build logic for all managed languaged: C#, VisualBasic, F#

Copyright (C) Microsoft Corporation. All rights reserved.
***********************************************************************************************
-->

<Project>
   <!-- 
        We are doing a cross-targeting build if there is no list of target frameworks specified
        nor is there a current target framework being built individually. In that case, a crosstargeting
        project file like Microsoft.<language>.CrossTargeting.targets gets imported.
   -->
   <PropertyGroup Condition="'$(TargetFrameworks)' != '' and '$(TargetFramework)' == ''">
      <IsCrossTargetingBuild>true</IsCrossTargetingBuild>
      <IsOuterBuild>true</IsOuterBuild>
   </PropertyGroup>

   <PropertyGroup Condition="'$(IsGraphBuild)' == 'true'">
      <!-- Microsoft.Net.Sdk adds all transitive project references to @ProjectReference. It does this at build time
           via a target. This fails the undeclared msbuild reference /isolate constraint, so disable transitive
           references.
           Do not disable transitive references if BuildProjectReferences is false. If building references is false,
           then msbuild won't try to build the transitive references, which won't trigger undeclared reference constraints.
          -->
      <DisableTransitiveProjectReferences Condition="'$(BuildProjectReferences)' != 'false'">true</DisableTransitiveProjectReferences>
   </PropertyGroup>

  <ItemGroup>
      <ProjectReferenceTargets Include="Build" Targets="$(ProjectReferenceTargetsForBuild)" Condition=" '$(ProjectReferenceTargetsForBuild)' != '' " />
      <ProjectReferenceTargets Include="Rebuild" Targets="$(ProjectReferenceTargetsForRebuild)" Condition=" '$(ProjectReferenceTargetsForRebuild)' != '' " />
      <ProjectReferenceTargets Include="Clean" Targets="$(ProjectReferenceTargetsForClean)" Condition=" '$(ProjectReferenceTargetsForClean)' != '' " />
  </ItemGroup>

</Project>
